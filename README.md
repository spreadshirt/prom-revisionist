# prom-revisionist

Prometheus proxy that rewrites queries on the fly, passing them on to another Prometheus instance.

**Status**: Entirely alpha, with a bunch of [issues](#1) left to fix for the reader.

## Usage

```
$ go run .
2023/03/02 11:12:07 Listening on http://localhost:19090
```

This runs the proxy at <http://localhost:19090>, rewriting queries as configured in [`config.yaml`](./config.yaml)
and passes them on to <http://localhost:9090>.

Alternatively, you can run the pre-built docker image:

```
docker run -it --rm -v $PWD/config.yaml:/config.yaml -p 19090:19090 ghcr.io/spreadshirt/prom-revisionist:0.0.1-alpha -config /config.yaml
```

## Configuration

Example config rewriting Jaeger Monitor queries to work with different metrics than the ones
generated by [spanmetricsprocessor](https://pkg.go.dev/github.com/open-telemetry/opentelemetry-collector-contrib/processor/spanmetricsprocessor).

## License

This project is licensed under the [MIT License](./LICENSE).